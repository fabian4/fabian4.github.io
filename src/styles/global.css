@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		--accent: #2d96bd;
		--black: #161209;
		--white: #fff;
		--gray: #a9a9b3;
		--gray-light: #f5f5f5;
		--gray-dark: #333;
		--background: #ffffff;
		--header-height: 4rem;
		--border-color: #e5e7eb; /* hardened border color */
	}

	@media (prefers-color-scheme: dark) {
		:root {
			--background: #1a1a1a;
			--gray-dark: #c9c9c9;
			--gray: #888;
			--gray-light: #2a2a2a;
			--border-color: #404040; /* hardened border color */
			--black: #eee;
			--accent: #5ab3d5;
		}
	}

	html.dark, html[theme="dark"] {
		--background: #1a1a1a;
		--gray-dark: #c9c9c9;
		--gray: #888;
		--gray-light: #2a2a2a;
		--border-color: #404040;
		--black: #eee;
		--accent: #5ab3d5;
	}

	body {
		@apply bg-background text-foreground;
	}
}

/* Custom scrollbar for Webkit */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	@apply bg-gray-300 dark:bg-gray-700 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
	@apply bg-gray-400 dark:bg-gray-600;
}

/* Shiki Dual Theme Handling */
/* Default (Light Mode) - Shiki inline styles handle this automatically. 
   We don't need to force vars unless we want to override Shiki's default. */

/* Dark Mode - Switch to dark theme vars */
html.dark .astro-code,
html.dark .astro-code span {
	color: var(--shiki-dark) !important;
	background-color: var(--shiki-dark-bg) !important;
	font-style: var(--shiki-dark-font-style) !important;
	font-weight: var(--shiki-dark-font-weight) !important;
	text-decoration: var(--shiki-dark-text-decoration) !important;
}

/* Code Block Container Styling - Authoritative Artifacts */
.astro-code {
	@apply rounded-md border border-border my-8 p-5 overflow-x-auto text-[0.85rem] leading-[1.6] shadow-sm;
	font-family: var(--font-mono);
	/* Ensure background separation from prose */
	background-color: #f6f8fa !important; /* GitHub Light bg */
}

html.dark .astro-code {
	background-color: #24292e !important; /* GitHub Dark bg */
	border-color: #444; /* Explicit border for dark mode artifacts */
}

/* Inline Code Styling - Subordinate */
:not(pre) > code {
	@apply relative rounded px-[0.3em] py-[0.1em] text-[0.85em] font-mono font-medium;
	background-color: rgba(175, 184, 193, 0.2); /* Neutral gray wash */
	color: var(--black); /* Keep text neutral/authoritative, avoid accent color for code */
}

/* Dark mode overrides for inline code */
html.dark :not(pre) > code {
	background-color: rgba(110, 118, 129, 0.4); /* Darker gray wash */
	color: var(--gray-dark);
}

/* Blockquote - Force tight vertical margins */
.prose blockquote {
	margin-top: 0 !important;
	margin-bottom: 0 !important;
}

.prose blockquote p {
	margin-top: 0 !important;
	margin-bottom: 0 !important;
}

.prose blockquote p:first-of-type {
	margin-top: 0 !important;
}

.prose blockquote p:last-of-type {
	margin-bottom: 0 !important;
}

/* Mobile-First Typography Optimizations */
/* Tighter line-height and spacing on mobile for reduced scroll fatigue */
@media (max-width: 640px) {
	.prose-sm {
		line-height: 1.6 !important;
	}

	.prose-sm p {
		margin-top: 0.9em !important;
		margin-bottom: 0.9em !important;
	}

	.prose-sm h2 {
		margin-top: 1.8em !important;
		margin-bottom: 0.7em !important;
		line-height: 1.25 !important;
	}

	.prose-sm h3 {
		margin-top: 1.5em !important;
		margin-bottom: 0.6em !important;
		line-height: 1.3 !important;
	}

	.prose-sm h4 {
		margin-top: 1.2em !important;
		margin-bottom: 0.5em !important;
	}

	.prose-sm blockquote {
		font-size: 0.9em !important;
		padding-top: 0.2em !important;
		padding-bottom: 0.2em !important;
	}

	/* Reduce code block vertical margins on mobile */
	.astro-code {
		margin-top: 1.25rem !important;
		margin-bottom: 1.25rem !important;
		padding: 1rem !important;
	}

	/* Tighter list spacing on mobile */
	.prose-sm ul > li,
	.prose-sm ol > li {
		margin-top: 0.35em !important;
		margin-bottom: 0.35em !important;
	}
}