---
import HeaderLink from './HeaderLink.astro';
---

<header class="desktop" id="header-desktop">
	<div class="header-wrapper">
		<div class="header-title">
			<a href="/" title="Home"><span class="header-title-pre"><i class="fas fa-home"></i></span></a>
		</div>
		<div class="menu">
			<div class="menu-inner">
				<HeaderLink href="/blog">Blog</HeaderLink>
				<HeaderLink href="/about">About</HeaderLink>
				<span class="menu-item delimiter"></span>
				<button class="menu-item theme-switch" id="theme-toggle" aria-label="Switch Theme">
					<i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
				</button>
			</div>
		</div>
	</div>
</header>

<script is:inline>
	const themeToggle = document.getElementById('theme-toggle');
	
	themeToggle?.addEventListener('click', () => {
		const element = document.documentElement;
		element.classList.toggle("dark");

		const isDark = element.classList.contains("dark");
		localStorage.setItem("theme", isDark ? "dark" : "light");
		
		// Dispatch event for other components (like GitHub chart)
		window.dispatchEvent(new CustomEvent('theme-change', { detail: { theme: isDark ? 'dark' : 'light' } }));
	});
</script>

<style>
	header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		height: var(--header-height);
		background: var(--background);
		z-index: 1000;
		box-shadow: 0 2px 4px 0 rgba(0,0,0,.04);
		border-bottom: 1px solid var(--border-color);
	}
	.header-wrapper {
		max-width: 960px;
		margin: 0 auto;
		padding: 0 1.5rem;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: space-between;
	}
	.header-title a {
		font-size: 1.5rem;
		text-decoration: none;
		color: var(--black);
		font-family: inherit;
		display: flex;
		align-items: center;
	}
	.menu-inner {
		display: flex;
		align-items: center;
		gap: 1.5rem;
	}
	.delimiter {
		width: 1px;
		height: 1.2rem;
		background: var(--border-color);
	}
	.theme-switch {
		cursor: pointer;
		font-size: 1.2rem;
		color: var(--black);
		background: none;
		border: none;
		padding: 0;
		display: flex;
		align-items: center;
	}
	/* Target links inside the menu */
	.menu-inner :global(a) {
		color: var(--black);
		text-decoration: none;
		font-weight: 500;
		font-size: 1rem;
	}
	.menu-inner :global(a:hover) {
		color: var(--accent);
	}
</style>